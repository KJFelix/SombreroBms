Bootloader code.

Note that it does not seem to work with the avrdude 6.01 from 2013 but works
with the 6.3 from 2016.

Fuse configuration for the atmega168pa:

LB: 0xD7 Crystal with BOD
HB: 0xDD 2.7V brown out detection level
EB: 0xFA Boot block uses the last 512Words 1024Bytes

Command line used to program them:

avrdude -c stk200 -p m168p -U lfuse:w:0xD7:h
avrdude -c stk200 -p m168p -U hfuse:w:0xDD:h
avrdude -c stk200 -p m168p -U efuse:w:0xFA:h

Command line to read the fuses:

avrdude -c stk200 -p m168p -U lfuse:r:dumpfile:h

